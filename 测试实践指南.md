# Androidå•å…ƒæµ‹è¯•æ ‡å‡†åŒ–å®è·µç¤ºä¾‹

æœ¬é¡¹ç›®æ˜¯æ ¹æ®ã€ŠAndroidå•å…ƒæµ‹è¯•æ ‡å‡†åŒ–ç ”ç©¶.mdã€‹æ–‡æ¡£åˆ›å»ºçš„å®Œæ•´å®è·µç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•æŒ‰ç…§**ä¾èµ–å¤æ‚åº¦åˆ†å±‚**çš„æ–¹å¼ç»„ç»‡å’Œå®æ–½Androidå•å…ƒæµ‹è¯•ã€‚

## ğŸ¯ é¡¹ç›®ç»“æ„

### ğŸ“‚ ä¸šåŠ¡é€»è¾‘å±‚
```
app/src/main/java/com/oneblue3/unicasetest/
â”œâ”€â”€ logic/              # ğŸš€ çº¯é€»è¾‘ç±» - æ— å¤–éƒ¨ä¾èµ–
â”‚   â”œâ”€â”€ Calculator.java      # æ•°å­¦è®¡ç®—é€»è¾‘
â”‚   â””â”€â”€ UserValidator.java   # ç”¨æˆ·éªŒè¯é€»è¾‘
â”œâ”€â”€ utils/              # ğŸ”§ å·¥å…·ç»„ä»¶ - æœ‰Androidä¾èµ–
â”‚   â””â”€â”€ FileUtil.java       # æ–‡ä»¶æ“ä½œå·¥å…·ç±»
â””â”€â”€ network/            # ğŸ”§ ç½‘ç»œç»„ä»¶ - æœ‰ç½‘ç»œä¾èµ–
    â””â”€â”€ NetworkUtil.java    # HTTPè¯·æ±‚å·¥å…·ç±»
```

### ğŸ“‚ æµ‹è¯•ä»£ç å±‚
```
app/src/test/java/com/oneblue3/unicasetest/
â”œâ”€â”€ logic/              # ğŸš€ çº¯é€»è¾‘æµ‹è¯• (60%)
â”‚   â”œâ”€â”€ CalculatorTest.java      # JUnit 5 + Truth
â”‚   â””â”€â”€ UserValidatorTest.java   # å‚æ•°åŒ–æµ‹è¯•ç¤ºä¾‹
â”œâ”€â”€ utils/              # ğŸ”§ ç»„ä»¶æµ‹è¯• (30%)
â”‚   â””â”€â”€ FileUtilTest.java       # Robolectricæµ‹è¯•
â”œâ”€â”€ network/            # ğŸ”§ ç»„ä»¶æµ‹è¯• (30%)
â”‚   â””â”€â”€ NetworkUtilTest.java    # MockWebServeræµ‹è¯•
â””â”€â”€ AllTestsSuite.java  # æµ‹è¯•å¥—ä»¶ç»„ç»‡

app/src/androidTest/java/com/oneblue3/unicasetest/
â””â”€â”€ ui/                 # ğŸ–¥ï¸ ç•Œé¢æµ‹è¯• (10%)
    â””â”€â”€ MainActivityUITest.java # Espressoæµ‹è¯•
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. è¿è¡Œçº¯é€»è¾‘æµ‹è¯•ï¼ˆæ—¥å¸¸å¼€å‘ï¼‰
```bash
# è¿è¡Œæ‰€æœ‰çº¯é€»è¾‘æµ‹è¯• - æœ€å¿«åé¦ˆ
./gradlew test --tests "*logic*"

# è¿è¡Œç‰¹å®šæµ‹è¯•ç±»
./gradlew test --tests "CalculatorTest"
./gradlew test --tests "UserValidatorTest"
```

**ç‰¹ç‚¹**ï¼š
- âš¡ æ‰§è¡Œæ—¶é—´ï¼š< 5ç§’
- ğŸ¯ è¦†ç›–ç‡ç›®æ ‡ï¼š> 95%
- ğŸ’¡ é€‚ç”¨åœºæ™¯ï¼šTDDå¼€å‘ã€å¿«é€ŸéªŒè¯ä¸šåŠ¡é€»è¾‘

### 2. è¿è¡Œç»„ä»¶æµ‹è¯•ï¼ˆé›†æˆéªŒè¯ï¼‰
```bash
# è¿è¡Œæ‰€æœ‰ç»„ä»¶æµ‹è¯•
./gradlew test --tests "*utils*" --tests "*network*"

# è¿è¡ŒAndroidç»„ä»¶æµ‹è¯•
./gradlew test --tests "FileUtilTest"

# è¿è¡Œç½‘ç»œç»„ä»¶æµ‹è¯•  
./gradlew test --tests "NetworkUtilTest"
```

**ç‰¹ç‚¹**ï¼š
- âš¡ æ‰§è¡Œæ—¶é—´ï¼š< 30ç§’
- ğŸ”§ æŠ€æœ¯æ ˆï¼šRobolectric + MockWebServer + Mockito
- ğŸ’¡ é€‚ç”¨åœºæ™¯ï¼šéªŒè¯å¤–éƒ¨ä¾èµ–ã€é›†æˆæµ‹è¯•

### 3. è¿è¡Œç•Œé¢æµ‹è¯•ï¼ˆå‘å¸ƒéªŒè¯ï¼‰
```bash
# å¯åŠ¨æ¨¡æ‹Ÿå™¨æˆ–è¿æ¥è®¾å¤‡
adb devices

# è¿è¡ŒUIæµ‹è¯•
./gradlew connectedAndroidTest

# è¿è¡Œç‰¹å®šUIæµ‹è¯•
./gradlew connectedAndroidTest -Pandroid.testInstrumentationRunnerArguments.class=com.oneblue3.unicasetest.ui.MainActivityUITest
```

**ç‰¹ç‚¹**ï¼š
- âš¡ æ‰§è¡Œæ—¶é—´ï¼š< 5åˆ†é’Ÿ
- ğŸ–¥ï¸ æŠ€æœ¯æ ˆï¼šEspresso + AndroidJUnitRunner
- ğŸ’¡ é€‚ç”¨åœºæ™¯ï¼šç«¯åˆ°ç«¯éªŒè¯ã€å…³é”®ç”¨æˆ·è·¯å¾„æµ‹è¯•

### 4. å®Œæ•´æµ‹è¯•æµç¨‹
```bash
# æ­¥éª¤1ï¼šè¿è¡Œå•å…ƒæµ‹è¯•ï¼ˆçº¯é€»è¾‘ + ç»„ä»¶ï¼‰
./gradlew test

# æ­¥éª¤2ï¼šè¿è¡Œç•Œé¢æµ‹è¯•
./gradlew connectedAndroidTest

# æ­¥éª¤3ï¼šç”Ÿæˆæµ‹è¯•æŠ¥å‘Š
./gradlew testDebugUnitTestCoverage
```

## ğŸ“Š æµ‹è¯•å±‚çº§è¯¦è§£

### ğŸš€ ç¬¬ä¸€å±‚ï¼šçº¯é€»è¾‘æµ‹è¯• (60%)

**ç›®æ ‡**ï¼šéªŒè¯æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼Œæ— ä»»ä½•å¤–éƒ¨ä¾èµ–

**ç¤ºä¾‹ç±»**ï¼š
- `Calculator` - æ•°å­¦è®¡ç®—é€»è¾‘
- `UserValidator` - æ•°æ®éªŒè¯è§„åˆ™

**æµ‹è¯•æ¡†æ¶**ï¼š
```kotlin
testImplementation("org.junit.jupiter:junit-jupiter:5.10.0")
testImplementation("com.google.truth:truth:1.1.5")
```

**æœ€ä½³å®è·µ**ï¼š
- âœ… æ¯«ç§’çº§æ‰§è¡Œæ—¶é—´
- âœ… å‚æ•°åŒ–æµ‹è¯•è¦†ç›–è¾¹ç•Œæ¡ä»¶
- âœ… ä½¿ç”¨Truthæ–­è¨€åº“æé«˜å¯è¯»æ€§
- âœ… æ”¯æŒTDDå¼€å‘æ¨¡å¼

### ğŸ”§ ç¬¬äºŒå±‚ï¼šç»„ä»¶æµ‹è¯• (30%)

**ç›®æ ‡**ï¼šéªŒè¯æœ‰å¤–éƒ¨ä¾èµ–çš„ç»„ä»¶ï¼Œä½†åœ¨å—æ§ç¯å¢ƒä¸­è¿è¡Œ

**ç¤ºä¾‹ç±»**ï¼š
- `FileUtil` - Androidæ–‡ä»¶æ“ä½œï¼ˆä½¿ç”¨Robolectricï¼‰
- `NetworkUtil` - HTTPè¯·æ±‚å¤„ç†ï¼ˆä½¿ç”¨MockWebServerï¼‰

**æµ‹è¯•æ¡†æ¶**ï¼š
```kotlin
testImplementation("org.robolectric:robolectric:4.11.1")
testImplementation("com.squareup.okhttp3:mockwebserver:4.12.0")
testImplementation("org.mockito:mockito-core:5.5.0")
```

**æœ€ä½³å®è·µ**ï¼š
- âœ… ç§’çº§æ‰§è¡Œæ—¶é—´
- âœ… æ¨¡æ‹Ÿå¤–éƒ¨ä¾èµ–è¡Œä¸º
- âœ… éªŒè¯è¾¹ç•Œæ¡ä»¶å’Œå¼‚å¸¸å¤„ç†
- âœ… ä¿æŒæµ‹è¯•çš„ç¡®å®šæ€§

### ğŸ–¥ï¸ ç¬¬ä¸‰å±‚ï¼šç•Œé¢æµ‹è¯• (10%)

**ç›®æ ‡**ï¼šéªŒè¯ç«¯åˆ°ç«¯ç”¨æˆ·äº¤äº’ï¼Œå…³æ³¨æ ¸å¿ƒä¸šåŠ¡æµç¨‹

**ç¤ºä¾‹åœºæ™¯**ï¼š
- ä¸»é¡µé¢å¯¼èˆªåˆ‡æ¢
- ç”¨æˆ·æ³¨å†Œå®Œæ•´æµç¨‹
- è·¨Fragmentæ•°æ®ä¼ é€’

**æµ‹è¯•æ¡†æ¶**ï¼š
```kotlin
androidTestImplementation("androidx.test.espresso:espresso-core:3.5.1")
androidTestImplementation("androidx.test:runner:1.5.2")
```

**æœ€ä½³å®è·µ**ï¼š
- âœ… ä¸“æ³¨æ ¸å¿ƒç”¨æˆ·è·¯å¾„
- âœ… é¿å…æµ‹è¯•UIç»†èŠ‚
- âœ… ä¿æŒæµ‹è¯•ç¨³å®šæ€§
- âœ… æ¨¡æ‹ŸçœŸå®ç”¨æˆ·æ“ä½œ

## ğŸ¯ æ€§èƒ½åŸºå‡†ä¸ç›®æ ‡

| æµ‹è¯•å±‚çº§ | æ‰§è¡Œæ—¶é—´ç›®æ ‡ | è¦†ç›–ç‡ç›®æ ‡ | ä¸»è¦ä»·å€¼ |
|---------|-------------|-----------|----------|
| ğŸš€ çº¯é€»è¾‘æµ‹è¯• | < 5ç§’ | > 95% | å¿«é€Ÿåé¦ˆã€TDDæ”¯æŒ |
| ğŸ”§ ç»„ä»¶æµ‹è¯• | < 30ç§’ | > 85% | ä¾èµ–éªŒè¯ã€é›†æˆæµ‹è¯• |
| ğŸ–¥ï¸ ç•Œé¢æµ‹è¯• | < 5åˆ†é’Ÿ | æ ¸å¿ƒè·¯å¾„100% | ç”¨æˆ·ä½“éªŒä¿éšœ |

## ğŸ› ï¸ å¼€å‘å·¥ä½œæµå»ºè®®

### æ—¥å¸¸å¼€å‘
1. **çº¢ç»¿é‡æ„å¾ªç¯**ï¼šç¼–å†™çº¯é€»è¾‘æµ‹è¯• â†’ å®ç°åŠŸèƒ½ â†’ é‡æ„ä¼˜åŒ–
2. **å¿«é€ŸéªŒè¯**ï¼šä¸»è¦è¿è¡Œçº¯é€»è¾‘æµ‹è¯•è·å¾—å³æ—¶åé¦ˆ
3. **å®šæœŸæ£€æŸ¥**ï¼šæ¯æ—¥è¿è¡Œå®Œæ•´çš„å•å…ƒæµ‹è¯•å¥—ä»¶

### é›†æˆé˜¶æ®µ
1. **å®Œæ•´éªŒè¯**ï¼šè¿è¡Œæ‰€æœ‰å±‚çº§çš„æµ‹è¯•
2. **æ€§èƒ½ç›‘æ§**ï¼šç¡®ä¿æµ‹è¯•æ‰§è¡Œæ—¶é—´åœ¨ç›®æ ‡èŒƒå›´å†…
3. **è¦†ç›–ç‡æ£€æŸ¥**ï¼šéªŒè¯ä»£ç è¦†ç›–ç‡è¾¾åˆ°ç›®æ ‡

### å‘å¸ƒå‰
1. **ç«¯åˆ°ç«¯æµ‹è¯•**ï¼šé‡ç‚¹è¿è¡Œç•Œé¢æµ‹è¯•éªŒè¯ç”¨æˆ·ä½“éªŒ
2. **å›å½’æµ‹è¯•**ï¼šè¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶ç¡®ä¿æ— å›å½’é—®é¢˜
3. **æµ‹è¯•æŠ¥å‘Š**ï¼šç”Ÿæˆè¯¦ç»†çš„æµ‹è¯•æŠ¥å‘Šå’Œè¦†ç›–ç‡åˆ†æ

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **Robolectricæµ‹è¯•å¤±è´¥**
   ```bash
   # æ£€æŸ¥SDKç‰ˆæœ¬é…ç½®
   @Config(sdk = {29})
   
   # ç¡®ä¿èµ„æºè®¿é—®é…ç½®
   android.testOptions.unitTests.isIncludeAndroidResources = true
   ```

2. **MockWebServerç«¯å£å†²çª**
   ```java
   // ä½¿ç”¨åŠ¨æ€ç«¯å£
   mockServer = new MockWebServer();
   mockServer.start(0); // è‡ªåŠ¨åˆ†é…ç«¯å£
   ```

3. **UIæµ‹è¯•ä¸ç¨³å®š**
   ```kotlin
   // ç¦ç”¨åŠ¨ç”»
   android.testOptions.animationsDisabled = true
   ```

## ğŸ“š å‚è€ƒèµ„æ–™

- [Androidå•å…ƒæµ‹è¯•æ ‡å‡†åŒ–ç ”ç©¶.md](./Androidå•å…ƒæµ‹è¯•æ ‡å‡†åŒ–ç ”ç©¶.md) - å®Œæ•´çš„ç†è®ºæŒ‡å¯¼
- [JUnit 5å®˜æ–¹æ–‡æ¡£](https://junit.org/junit5/docs/current/user-guide/)
- [Truthæ–­è¨€åº“](https://truth.dev/)
- [Robolectricæ–‡æ¡£](http://robolectric.org/)
- [Espressoæµ‹è¯•æŒ‡å—](https://developer.android.com/training/testing/espresso)

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. éµå¾ªä¸‰å±‚æµ‹è¯•æ¶æ„åŸåˆ™
2. ä¿æŒæµ‹è¯•çš„å¿«é€Ÿæ‰§è¡Œå’Œç¨³å®šæ€§
3. ä¼˜å…ˆç¼–å†™çº¯é€»è¾‘æµ‹è¯•
4. ç•Œé¢æµ‹è¯•åªå…³æ³¨æ ¸å¿ƒç”¨æˆ·è·¯å¾„
5. ç¡®ä¿æµ‹è¯•ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§